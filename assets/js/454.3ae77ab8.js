(window.webpackJsonp=window.webpackJsonp||[]).push([[454],{201:function(t,n,s){t.exports=s.p+"assets/img/middleware-call-sequence.f9adb834.png"},658:function(t,n,s){"use strict";s.r(n);var e=s(0),a=Object(e.a)({},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[t._v("As you see in the previous section, a middleware can be use on different context:")]),t._v(" "),e("ul",[e("li",[e("router-link",{attrs:{to:"/docs/server-loader.html"}},[t._v("ServerLoader")]),t._v(",")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/docs/controllers.html"}},[t._v("Controller")]),t._v(",")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/docs/controllers.html"}},[t._v("Endpoint")]),t._v(".")],1)]),t._v(" "),e("p",[t._v("Middleware associated to a controller or endpoint as a same constraint that an endpoint.\nIt'll be played only when the url request match with the path associated to the controller and his endpoint method.")]),t._v(" "),e("p",[t._v("When a request is sent to the server all middlewares added in the "),e("router-link",{attrs:{to:"/docs/server-loader.html"}},[t._v("ServerLoader")]),t._v(", "),e("router-link",{attrs:{to:"/docs/controllers.html"}},[t._v("Controller")]),t._v(" or Endpoint with decorators\nwill be called while a response isn't sent by one of the middleware in the stack.")],1),t._v(" "),e("img",{staticStyle:{"max-width":"400px"},attrs:{src:s(201)}}),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("For example:")]),t._v(" "),t._m(4),e("p",[t._v("According to the call sequence scheme, the stack will be there:")]),t._v(" "),t._m(5)])},[function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"middleware-call-sequences"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#middleware-call-sequences","aria-hidden":"true"}},[this._v("#")]),this._v(" Middleware call sequences")])},function(){var t=this.$createElement,n=this._self._c||t;return n("blockquote",[n("p",[this._v("Note: The middlewares represented in the Endpoint (0-n) box will be replayed as many times as it has endpoint that match\nthe url of the request.")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("blockquote",[n("p",[this._v("* Render is called only when a the @Render o @ResponseView decorator is used on the endpoint.")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("blockquote",[n("p",[this._v("** SendResponse middleware send a response only when a data is return by the endpoint method.")])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[t._v("@"),s("span",{attrs:{class:"token function"}},[t._v("Controller")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'/'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),s("span",{attrs:{class:"token function"}},[t._v("UseAfter")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwCtrlAfter"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),s("span",{attrs:{class:"token function"}},[t._v("UseBefore")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwCtrlBefore"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),s("span",{attrs:{class:"token function"}},[t._v("Use")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwCtrl"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MyCtrl")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    @"),s("span",{attrs:{class:"token function"}},[t._v("Get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"/"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    @"),s("span",{attrs:{class:"token function"}},[t._v("UseAfter")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwAfter"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    @"),s("span",{attrs:{class:"token function"}},[t._v("Use")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mdlw"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    @"),s("span",{attrs:{class:"token function"}},[t._v("UseBefore")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwBefore"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token function"}},[t._v("endpointA")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@"),s("span",{attrs:{class:"token function"}},[t._v("Next")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("next")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token builtin"}},[t._v("console")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"EndpointA"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token function"}},[t._v("next")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    @"),s("span",{attrs:{class:"token function"}},[t._v("Get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"/"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token function"}},[t._v("endpointB")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token builtin"}},[t._v("console")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"EndpointB"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ul",[s("li",[s("strong",[t._v("Middlewares")]),t._v(" added in ServerLoader (logger, express middleware, etc...),")]),t._v(" "),s("li",[s("strong",[t._v("MdlwCtrlBefore")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("MdlwCtrl")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("MdlwBefore")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("MyCtrl.endpointA")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("MdlwAfter")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("SendResponse")]),t._v(", (but nothing data is returned by the endpointA)")]),t._v(" "),s("li",[s("strong",[t._v("MdlwCtrl")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("MyCtrl.endpointB")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("MdlwAfter")]),t._v(",")]),t._v(" "),s("li",[s("strong",[t._v("SendResponse")]),t._v(", send a response because endpointB return a data,")]),t._v(" "),s("li",[s("strong",[t._v("MdlwCtrlAfter")]),t._v(", but this middleware will not be called because a response is sent.")]),t._v(" "),s("li",[s("strong",[t._v("Middleware")]),t._v(" added in ServerLoader (not called too).")])])}],!1,null,null,null);a.options.__file="call-sequence.md";n.default=a.exports}}]);